---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - bitschema/__init__.py
  - bitschema/errors.py
  - tests/conftest.py
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Developer can install project dependencies with pip install"
    - "Developer can run tests with pytest command"
    - "Developer can import bitschema package without errors"
  artifacts:
    - path: "pyproject.toml"
      provides: "Python project metadata and dependencies"
      contains: "pydantic>=2.12.5"
    - path: "bitschema/__init__.py"
      provides: "Package initialization"
      min_lines: 1
    - path: "bitschema/errors.py"
      provides: "Custom exception classes for validation failures"
      exports: ["ValidationError", "SchemaError"]
    - path: "tests/conftest.py"
      provides: "Pytest configuration and shared fixtures"
      min_lines: 5
  key_links:
    - from: "pyproject.toml"
      to: "pip install"
      via: "build-system configuration"
      pattern: "\\[build-system\\]"
    - from: "tests/"
      to: "pytest"
      via: "auto-discovery"
      pattern: "test_.*\\.py"
---

<objective>
Establish Python package structure with Pydantic, PyYAML, and pytest configured.

Purpose: Create foundation for BitSchema library with proper dependency management, importable package structure, and test framework ready for TDD cycles in subsequent plans.

Output: Working Python package that can be installed in development mode and tested.
</objective>

<execution_context>
@/Users/rbrandes/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rbrandes/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/rbrandes/Documents/private/private-projects/BitSchema/.planning/PROJECT.md
@/Users/rbrandes/Documents/private/private-projects/BitSchema/.planning/ROADMAP.md
@/Users/rbrandes/Documents/private/private-projects/BitSchema/.planning/REQUIREMENTS.md
@/Users/rbrandes/Documents/private/private-projects/BitSchema/.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Create Python package structure with pyproject.toml</name>
  <files>
    pyproject.toml
    bitschema/__init__.py
    .gitignore
  </files>
  <action>
Create modern Python package using pyproject.toml (PEP 621) with these specifications:

**pyproject.toml:**
- Project name: "bitschema"
- Version: "0.1.0"
- Python requires: ">=3.10"
- Dependencies: pydantic>=2.12.5, PyYAML>=6.0.3
- Dev dependencies: pytest>=9.0.2, hypothesis>=6.151.9
- Build system: setuptools with dynamic version
- Project metadata: description, authors (leave TBD), readme

**bitschema/__init__.py:**
- Empty file (package marker) or simple __version__ = "0.1.0"
- No imports yet (will add exports in later plans)

**.gitignore:**
- Standard Python: __pycache__, *.pyc, *.pyo, .pytest_cache
- Virtual environments: venv/, .venv/, env/
- Build artifacts: dist/, build/, *.egg-info
- IDE: .vscode/, .idea/

Follow research recommendations: Use pyproject.toml (not setup.py), Pydantic v2, pytest for testing.
  </action>
  <verify>
    pip install -e . completes without errors
    python -c "import bitschema; print(bitschema.__version__)" outputs "0.1.0"
  </verify>
  <done>
Package can be installed in development mode and imported successfully. Dependencies (pydantic, PyYAML) are declared and installable.
  </done>
</task>

<task type="auto">
  <name>Create custom exception classes and pytest configuration</name>
  <files>
    bitschema/errors.py
    tests/conftest.py
  </files>
  <action>
Create error handling infrastructure and test configuration.

**bitschema/errors.py:**
- Define `ValidationError(Exception)` with:
  - `__init__(self, message: str, field_name: str | None = None)`
  - Custom `__str__()` that includes field name if provided: "Field 'age': value exceeds maximum"
  - Attributes: `message`, `field_name`
- Define `SchemaError(Exception)` for schema-level issues (duplicate fields, bit overflow)
  - `__init__(self, message: str)`
  - Store message attribute for programmatic access

Follow research pattern: Structured exceptions with context enable programmatic error handling and clear debugging.

**tests/conftest.py:**
- Import pytest
- Add module docstring explaining this contains shared test fixtures
- Leave mostly empty for now (fixtures will be added as needed in TDD plans)
- Add comment: "# Shared fixtures for BitSchema tests"

NO custom pytest configuration in pyproject.toml yet - pytest auto-discovery is sufficient.
  </action>
  <verify>
    python -c "from bitschema.errors import ValidationError, SchemaError; e = ValidationError('test', 'field1'); print(e)" outputs field-prefixed message
    pytest --collect-only shows tests directory is discoverable (may be empty)
  </verify>
  <done>
Custom exceptions can be imported and instantiated with context. Pytest is configured and can discover test files in tests/ directory.
  </done>
</task>

</tasks>

<verification>
Run the following commands to verify Phase 1 Plan 1 completion:

1. `pip install -e .` - Installs package in development mode
2. `python -c "import bitschema"` - Package imports without error
3. `python -c "from bitschema.errors import ValidationError, SchemaError"` - Exceptions importable
4. `pytest --collect-only` - Test discovery works
5. `python -c "import pydantic; import yaml"` - Dependencies installed
</verification>

<success_criteria>
- Package structure follows modern Python standards (pyproject.toml, not setup.py)
- Pydantic 2.12.5+ and PyYAML 6.0.3+ are installed and importable
- Pytest 9.0.2+ and hypothesis 6.151.9+ are installed (dev dependencies)
- bitschema package can be imported
- Custom exceptions (ValidationError, SchemaError) defined with context attributes
- Tests directory exists and pytest can discover it
- Development install works (`pip install -e .`)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
